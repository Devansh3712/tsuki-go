{{ template "top" . }}
<h2>Search Users</h2>
<form
  name="search"
  action="/search"
  method="POST"
  enctype="multipart/form-data"
>
  <input
    name="search"
    type="text"
    maxlength="32"
    placeholder="Enter username"
    pattern="^[A-Za-z0-9._\\s]{1,32}$"
    title="Usernames only contain alphabets, digits, periods (.) and underscores (_)"
    style="margin-bottom: 30px"
    required
  />
</form>
{{ if .users }}
<div id="users">
  {{ range .users }}
  <form
    name="follow"
    action="/search/{{ .Username }}/toggle-follow"
    method="POST"
    enctype="multipart/form-data"
  >
    <span class="avatar-small">
      {{ if .Avatar }}
      <img src="{{ .Avatar }}" />
      {{ else }}
      <img src="/static/images/avatar.jpg" />
      {{ end }}
    </span>
    <a href="/user/{{ .Username }}">
      <h3 style="display: inline-block">@{{ .Username }}</h3>
    </a>
    &nbsp; {{ if eq .Follows true }}
    <button type="submit">Unfollow</button>
    {{ else if eq .Follows false }}
    <button type="submit">Follow</button>
    {{ end }}
  </form>
  <p class="separator">
    {{ .Posts }} posts &nbsp; {{ .Followers }} followers &nbsp; {{ .Following }}
    following
  </p>
  {{ end }}
</div>
{{ if eq (len .users) 10 }}
<h3 style="padding-top: 10px">
  <a onclick="loadMoreUsers()">
    <i class="fa-solid fa-circle-chevron-down"></i> More
  </a>
</h3>
{{ end }} {{ else }}
<p style="color: rgb(130, 130, 130)">No users found.</p>
{{ end }} {{ template "bottom" . }}
